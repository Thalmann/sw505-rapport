
\newcommand{\unkcell}[3][]{\node (robot) [draw,fill=yellow, text centered, rectangle,
minimum height=\cellsize cm,minimum width=\cellsize cm, align=right] at ($(#2*\cellsize,#3*\cellsize) + (\cellsize/2,\cellsize/2)$) {$\scriptstyle #1$};}

\newcommand{\emptycell}[3][]{\node (robot) [draw,fill=green, text centered, rectangle,
minimum height=\cellsize cm,minimum width=\cellsize cm, align=right] at ($(#2*\cellsize,#3*\cellsize) + (\cellsize/2,\cellsize/2)$) {$\scriptstyle #1$};}

\newcommand{\occcell}[3][]{\node (robot) [draw,fill=red, text centered, rectangle,
minimum height=\cellsize cm,minimum width=\cellsize cm, align=right] at ($(#2*\cellsize,#3*\cellsize) + (\cellsize/2,\cellsize/2)$) {$\scriptstyle #1$};}

\newcommand{\scancell}[3][]{\node (robot) [draw,fill=orange, text centered, rectangle,
minimum height=\cellsize cm,minimum width=\cellsize cm, align=right] at ($(#2*\cellsize,#3*\cellsize) + (\cellsize/2,\cellsize/2)$) {$\scriptstyle #1$};}

\newcommand{\destcell}[3][]{\node (robot) [draw,fill=blue, text centered, rectangle,
minimum height=\cellsize cm,minimum width=\cellsize cm, align=right] at ($(#2*\cellsize,#3*\cellsize) + (\cellsize/2,\cellsize/2)$) {$\scriptstyle #1$};}

For at automatisere kortlægningen af et rum, er det nødvendigt at automatisere ruteplanlægningen.
Dette kapitel handler om den udledede metode til at planlægge en rute for robotten, så der bliver valgt den bedst mulige rute ud fra nogle kriterier.

\section{Overordnet beskrivelse}
Den overordnede idé er at efter robotten har taget en scanning, skal den ud fra de celler som har høj sandsynlighed for at være ledige, finde den næste lokation hvor der skal foretages en scanning.
Der gås ud fra at robotten opererer indenfor et occupancy grid, derved vil der for destinationer og målinger blive brugt celler.

\paragraph{En mulig destinationscelle} er en celle med høj sandsynlighed for at være ledig.
Desuden skal et vist antal celler omkring den mulige celle ligeledes være ledige, afhængig af robottens størrelse, for at være sikker på at der er plads til robotten.

\paragraph{Kriterier for en god destination} afhænger af den information gain som robotten potentielt ville få ved at scanne i destinationen.
Dette afgøres af synsfeltet for cellen, dvs. de celler som robotten ville opdatere ved at scanne fra cellen.
Da vi opererer i en vinkelret verden, vil synsfeltet for en given celle være de celler som ligger vandret til højre og venstre for cellen, samt de celler som ligger lodret over og under cellen.

Hvor høj information gain der opnås, skal bestemmes ud fra sandsynlighederne der er i forvejen, for cellerne i synsfeltet.
Kort sagt er der bedst gain på en celle, hvor der er flest ikke-hidtil-scannede celler i synsfeltet.

\section{Teori}
\begin{description}
\item[$D$]{-- Mængden af mulige destinationer}
\item[$x$]{-- Robottens lokation}
\item[$p(d)$]{-- Mængden af celler som er i synsfeltet for $d$}
\end{description}

\begin{equation}
v(d) = \sum_{c \in p(d)} |0.5 - P(c)|
\end{equation}

\begin{equation}
V = \{ v(d) \mid d \in D \}
\end{equation}

\begin{equation}
Q = \{ d \in D \mid v(d) \in \min V \}
\end{equation}

\begin{equation}
A = \{ \text{dist}(x,q) \mid q \in Q \}
\end{equation}

\begin{equation}
r =  q \mid \text{dist}(x,q) \in \min A
\end{equation}

\section{Algoritme}
\begin{algorithm}
\SetKwFunction{Fn}{GetNextScanDest}
\Fn{$D$}{\\
	
}
\end{algorithm}

\section{Illustration}

\begin{figure}
\centering
\begin{tikzpicture}[]
\newcommand{\gridsize}{10}
\newcommand{\cellsize}{0.7}

\coordinate (bl) at (0,0);
\coordinate (tr) at (\gridsize,\gridsize);

\foreach \x in {0,\cellsize,...,\gridsize}
	\foreach \y in {0,\cellsize,...,\gridsize}
		\draw [fill=yellow] ($(bl) + (\x,\y)$) rectangle ($(bl) + (\x + \cellsize, \y + \cellsize)$);
		
\emptycell{6}{6}
\emptycell{6}{7}
\emptycell{6}{8}
\emptycell{7}{6}
\emptycell[x]{7}{7}
\emptycell{7}{8}
\emptycell{8}{6}
\emptycell{8}{7}
\emptycell{8}{8}

\end{tikzpicture}
\label{rute:udgangspunkt}
\caption{Udgangspunkt}
\end{figure}
